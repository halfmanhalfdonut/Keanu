(function(){var a;a=(function(){function b(e,c,d){var f=this;if(!e){return}this.keanu=e;this.ctx=this.keanu.ctx;this.origin=c.origin||[];this.originX=this.origin[0]||0;this.originY=this.origin[1]||0;this.originRadius=this.origin[2]||0;this.control=c.control||[];this.controlX=this.control[0]||0;this.controlY=this.control[1]||0;this.controlRadius=this.control[2]||0;this.destination=c.destination||[];this.destinationX=this.destination[0]||0;this.destinationY=this.destination[1]||0;this.destinationRadius=this.destination[2]||0;this.trailStates=[];this.keepStates=15;this.step=3;this.animationMiddle=c.animationMiddle||2;this.shape=c.shape||e.circle;this.styles=c.styles||{};this.zIndex=c.zIndex||0;this.easeType=c.easeType||"linear";this.callback=c.callback;this.useTrail=c.useTrail||true;this.duration=d||1000;this.easing=this.keanu.tweens[this.easeType];this.originX=this.originX===this.controlX?this.originX+1:this.originX;this.originY=this.originY===this.controlY?this.originY+1:this.originY;this.ballX=this.trailX=this.shadowX=this.originX;this.ballY=this.trailY=this.shadowY=this.originY;this.ballRadius=this.trailRadius=this.shadowRadius=this.originRadius;this.xChange=this.destinationX-this.originX;this.yChange=this.destinationY-this.originY;this.rChange1=this.controlRadius-this.originRadius;this.rChange2=this.destinationRadius-this.controlRadius;this.intervalTime=this.keanu.getIntervalTime();this.tickerStep=this.duration/this.intervalTime;this.frame=0;this.tick=0;this.draw=function(){f.drawShadow();f.drawTrail();f.drawShot();f.frame++;f.tick+=f.intervalTime;if(f.tick>=f.duration){console.log("callback");e.unsubscribe("enterFrame",f.draw,f.zIndex);f.trailStates=[];f.callback&&f.callback();return true}};this.keanu.subscribe("enterFrame",this.draw);this}b.prototype.drawTrail=function(){var f,e,d,c;d=this.trailStates.length;if(d>0){f=0.1;c=0.6;e=d-1;while(e>=0){this.drawBall(this.keanu,{x:this.trailStates[e][0]||0,y:this.trailStates[e][1]||0,r:(this.trailStates[e][2]*c)||0,styles:{fillStyle:"rgba(12, 131, 218, "+f+")",strokeStyle:"rgba(12, 131, 218, "+f+")"}});this.keanu.setDimensions({x:this.trailStates[e][0]-(this.trailStates[e][2]*c),y:this.trailStates[e][1]-(this.trailStates[e][2]*c),w:this.trailStates[e][0]+(this.trailStates[e][2]*c),h:this.trailStates[e][1]+(this.trailStates[e][2]*c)});f+=0.05;if(c<0.98){c+=0.02}e--}}return this};b.prototype.drawShadow=function(){this.shadowX=this.easing(this.frame,this.originX,this.xChange,this.tickerStep);this.shadowY=this.easing(this.frame,this.originY,this.yChange,this.tickerStep);this.shadowRadius=2;this.drawBall(this.keanu,{x:this.shadowX,y:this.shadowY,r:this.shadowRadius,styles:{fillStyle:"#000",strokeStyle:"#000",lineWidth:"0"}});this.keanu.setDimensions({x:this.shadowX-this.shadowRadius,y:this.shadowY-this.shadowRadius,w:this.shadowX+this.shadowRadius,h:this.shadowY+this.shadowRadius});return this};b.prototype.handleTrailState=function(f){var d,e,c;c=[];e=this.trailStates.length>=this.keepStates?this.keepStates:this.trailStates.length;c.push(f);for(d=0;0<=e?d<e:d>e;0<=e?d++:d--){c.push(this.trailStates[d])}this.trailStates=c;return this};b.prototype.drawShot=function(){this.ballX=this.easing(this.frame,this.originX,this.xChange,this.tickerStep);this.ballY=this.easing(this.frame,this.originY,this.yChange,this.tickerStep);if(this.frame<this.tickerStep/this.animationMiddle){this.ballRadius=this.easing(this.frame,this.originRadius,this.rChange1,this.tickerStep)}else{this.ballRadius=this.easing(this.frame,this.controlRadius,this.rChange2,this.tickerStep)}if(this.controlX!==0){this.ballX=this.keanu.tweens.quadraticBezierCurve((this.originX-this.ballX)/(this.originX-this.destinationX),this.originX,this.controlX,this.destinationX)}if(this.controlY!==0){this.ballY=this.keanu.tweens.quadraticBezierCurve((this.originY-this.ballY)/(this.originY-this.destinationY),this.originY,this.controlY,this.destinationY)}if(this.frame%this.step===0){this.handleTrailState([this.ballX,this.ballY,this.ballRadius])}this.drawBall(this.keanu,{x:this.ballX,y:this.ballY,r:this.ballRadius,styles:{fillStyle:this.styles.fillStyle||false,strokeStyle:this.styles.strokeStyle||false,lineWidth:this.styles.lineWidth||false}});this.keanu.setDimensions({x:this.ballX-this.ballRadius,y:this.ballY-this.ballRadius,w:this.ballX+this.ballRadius,h:this.ballY+this.ballRadius});return this};b.prototype.drawBall=function(d,e){var g,k,c,l,j,i,h;e=e||{};e.styles=e.styles||{};i=e.x||0;h=e.y||0;c=e.r||0;k=e.isTrail||false;g=e.styles.fillStyle||"#E08428";j=e.styles.lineWidth||0;l=e.styles.strokeStyle||"#D07317";d.ctx.fillStyle=g;d.ctx.strokeStyle=l;d.ctx.lineWidth=j;d.ctx.beginPath();d.ctx.arc(i,h,c,0,Math.PI*2,true);d.ctx.closePath();d.ctx.fill();d.ctx.stroke();return this};b.prototype.version="0.2-coffee";return b})();window.Keanu.modules.Basketball=a}).call(this);
